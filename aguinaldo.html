<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Calculadora de Aguinaldo ¬∑ Bah√≠a de Banderas</title>

  <meta name="theme-color" content="#0b1220" />
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="Calculadora profesional de aguinaldo para trabajadores en M√©xico.">

  <!-- ========================= LOGOS / ICONOS ========================= -->
  <link
    rel="icon"
    type="image/png"
    href="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png"
  />
  <link
    rel="apple-touch-icon"
    href="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png"
  />

  <!--
    ===========================================================
    Firma / Autor (solo visible al depurar o ver c√≥digo fuente)
    Jair Elizondo
    +52 322 243 9782
    Hint: #whoami
    ===========================================================
  -->

  <style>
    :root{
      --bg: #f6f8ff;
      --card: rgba(255,255,255,.78);
      --card-solid:#ffffff;
      --ink: #0f1a2e;
      --muted:#5b6b86;
      --accent: #246bff;
      --accent-2:#18c6ff;
      --accent-3:#7c3aed;
      --border: rgba(207,224,255,.85);
      --border-2: rgba(255,255,255,.55);
      --radius: 18px;
      --radius-2: 22px;
      --shadow: 0 14px 40px rgba(16,48,96,.12);
      --shadow-2: 0 18px 60px rgba(16,48,96,.16);
      --ring: 0 0 0 4px rgba(36,107,255,.16);
      --maxw: 920px;
    }

    :root[data-theme="dark"]{
      --bg: #070b14;
      --card: rgba(12,18,34,.72);
      --card-solid:#0b1220;
      --ink: #e9eefc;
      --muted:#a9b6d6;
      --border: rgba(60,86,140,.35);
      --border-2: rgba(255,255,255,.08);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --shadow-2: 0 28px 90px rgba(0,0,0,.55);
      --ring: 0 0 0 4px rgba(24,198,255,.18);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(36,107,255,.18), transparent 60%),
        radial-gradient(900px 500px at 110% 10%, rgba(24,198,255,.14), transparent 55%),
        radial-gradient(900px 500px at 50% 115%, rgba(124,58,237,.12), transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 38px 38px;
      opacity: .25;
      pointer-events:none;
      mix-blend-mode: overlay;
    }
    :root[data-theme="dark"] body::before{ opacity:.10; }

    a{ color:inherit; }

    /* ===== Layout para que footer no se vaya al infinito ===== */
    .page{
      min-height: 100svh;
      display:flex;
      flex-direction:column;
    }

    .shell{
      max-width:var(--maxw);
      margin:0 auto;
      padding:24px;
      position:relative;
      width:100%;
      flex: 1 0 auto;
    }

    /* ========================= Splash Screen (Airconekta) ========================= */
    .splash{
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px 520px at 20% 15%, rgba(36,107,255,.28), transparent 60%),
        radial-gradient(900px 520px at 85% 25%, rgba(24,198,255,.22), transparent 55%),
        radial-gradient(900px 520px at 45% 100%, rgba(124,58,237,.18), transparent 60%),
        linear-gradient(180deg, #070b14, #0b1220);
      z-index:9999;
      transition: opacity .35s ease, transform .35s ease, visibility .35s ease;
    }
    .splash.hide{
      opacity:0;
      transform: translateY(-6px);
      visibility:hidden;
      pointer-events:none;
    }
    .splash-card{
      width:min(92vw, 560px);
      border-radius: 28px;
      padding: 28px 22px;
      text-align:center;
      color:#eaf2ff;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,16,30,.55);
      box-shadow: 0 30px 90px rgba(0,0,0,.6);
      backdrop-filter: blur(14px) saturate(120%);
    }
    .splash-logo{
      width: 88px;
      height: 88px;
      margin: 0 auto 10px;
      border-radius: 26px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      position:relative;
      overflow:hidden;
    }
    .splash-logo::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: conic-gradient(
        from 0deg,
        rgba(36,107,255,.0),
        rgba(36,107,255,.6),
        rgba(24,198,255,.55),
        rgba(124,58,237,.55),
        rgba(36,107,255,.0)
      );
      animation: spin 2.4s linear infinite;
      opacity:.9;
    }
    .splash-logo .logo-img{
      position:relative;
      width: 62px;
      height: 62px;
      border-radius: 22px;
      display:block;
      background: rgba(11,18,32,.92);
      border:1px solid rgba(255,255,255,.12);
      object-fit: contain;
      padding: 10px;
    }
    .splash-title{
      font-weight: 1000;
      letter-spacing: .6px;
      font-size: clamp(2.0rem, 4.2vw, 3.0rem);
      margin: 8px 0 6px;
    }
    .splash-sub{
      margin: 0;
      color: rgba(233,238,252,.78);
      font-weight: 700;
    }
    .splash-bar{
      height: 10px;
      margin: 16px auto 0;
      border-radius: 999px;
      width: min(380px, 82%);
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .splash-bar > i{
      display:block;
      height:100%;
      width: 40%;
      background: linear-gradient(90deg, rgba(36,107,255,.15), rgba(36,107,255,.85), rgba(24,198,255,.85));
      border-radius: 999px;
      animation: load 1.1s ease-in-out infinite;
      filter: drop-shadow(0 6px 14px rgba(36,107,255,.20));
    }

    @keyframes load{
      0%{ transform: translateX(-30%); opacity:.65; }
      50%{ transform: translateX(120%); opacity:1; }
      100%{ transform: translateX(260%); opacity:.65; }
    }
    @keyframes spin{ to{ transform: rotate(360deg);} }

    @media (prefers-reduced-motion: reduce){
      .splash-logo::before, .splash-bar > i{ animation:none !important; }
      .splash{ transition:none; }
    }

    /* ========================= Top nav ========================= */
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 16px;
      border-radius: 22px;
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadow);
      position:sticky;
      top:12px;
      backdrop-filter: blur(14px) saturate(140%);
      z-index:10;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      font-weight: 1000;
      letter-spacing: .2px;
    }
    .logo{
      width: 40px;
      height: 40px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, rgba(36,107,255,.18), rgba(24,198,255,.14));
      border:1px solid var(--border-2);
      box-shadow: 0 10px 26px rgba(16,48,96,.10);
      position:relative;
      overflow:hidden;
    }
    .logo::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: conic-gradient(
        from 0deg,
        rgba(36,107,255,.0),
        rgba(36,107,255,.55),
        rgba(24,198,255,.55),
        rgba(124,58,237,.55),
        rgba(36,107,255,.0)
      );
      opacity:.55;
      animation: spin 6.5s linear infinite;
    }
    .logo .logo-img{
      position:relative;
      width: 26px;
      height: 26px;
      display:block;
      object-fit: contain;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
    }
    .brand small{
      display:block;
      font-weight:800;
      color:var(--muted);
      letter-spacing:0;
      margin-top:2px;
    }
    .inline{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    /* ========================= Cards / typography ========================= */
    .card{
      margin-top:18px;
      padding:22px;
      border-radius: 26px;
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px) saturate(140%);
    }
    h1{ font-size:1.6rem; margin:0 0 6px; letter-spacing:.2px; }
    h2{ font-size:1.15rem; margin:0 0 10px; }
    .lead{ color:var(--muted); margin:0 0 14px; }

    label{ display:block; font-size:.92rem; color:var(--muted); margin:4px 0 6px; }

    input{
      width:100%;
      padding:12px 14px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.55);
      color: var(--ink);
      outline:none;
      transition: border .15s ease, box-shadow .15s ease, transform .06s ease, background .15s ease;
      font:inherit;
      backdrop-filter: blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] input{ background: rgba(255,255,255,.05); }
    input:focus{
      border-color: rgba(24,198,255,.75);
      box-shadow: var(--ring);
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:14px;
    }
    .col-12{ grid-column:span 12; }
    .col-6{ grid-column:span 6; }
    @media (max-width:860px){ .col-6{ grid-column:span 12; } .shell{ padding:16px; } .nav{ top:10px; } }

    /* ========================= Buttons ========================= */
    .btn{
      appearance:none;
      cursor:pointer;
      user-select:none;
      border:1px solid rgba(36,107,255,.65);
      color:var(--ink);
      background: rgba(255,255,255,.55);
      padding:12px 14px;
      border-radius: 14px;
      font-weight: 900;
      letter-spacing:.2px;
      transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      line-height:1;
      backdrop-filter: blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] .btn{ background: rgba(255,255,255,.06); }
    .btn:hover{ box-shadow: var(--ring); border-color: rgba(36,107,255,.95); }
    .btn:active{ transform: translateY(1px); }
    .btn:focus-visible{ outline:none; box-shadow: var(--ring); }

    .btn-primary{
      color:#fff;
      border-color: transparent;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 12px 26px rgba(36,107,255,.22);
    }
    .btn-primary:hover{
      box-shadow: 0 0 0 4px rgba(24,198,255,.18), 0 18px 46px rgba(36,107,255,.20);
    }
    .btn-ghost{
      border-color: var(--border);
      color: var(--ink);
      background: transparent;
    }
    .btn-ghost:hover{ box-shadow: 0 0 0 4px rgba(207,224,255,.35); }

    .btn-icon{
      width: 44px;
      height: 44px;
      padding: 0;
      border-radius: 14px;
      justify-content:center;
    }

    .divider{ height:1px; background: rgba(207,224,255,.55); margin:14px 0; }
    :root[data-theme="dark"] .divider{ background: rgba(60,86,140,.35); }

    .status{ font-size:.92rem; color:var(--muted); }

    .result-box{
      margin-top:14px;
      padding:16px;
      border-radius:18px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(14px) saturate(140%);
      box-shadow: 0 12px 30px rgba(16,48,96,.08);
    }
    :root[data-theme="dark"] .result-box{ background: rgba(255,255,255,.04); }

    .footer{
      margin-top:18px;
      color:var(--muted);
      font-size:.9rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;

      /* clave para que no se quede ‚Äúmuy abajo‚Äù si el contenido es corto */
      margin-top:auto;
      padding: 18px 0 6px;
    }

    /* Views */
    [data-view]{ display:none; }
    [data-view].active{ display:block; }

    /* ========================= WHOAMI (vista especial) ========================= */
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.9rem;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.45);
      color:var(--muted);
      backdrop-filter: blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] .pill{ background: rgba(255,255,255,.05); }

    .who-wrap{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      margin-top:12px;
      align-items:stretch;
    }
    @media (max-width:860px){
      .who-wrap{ grid-template-columns:1fr; }
    }
    .who-card{
      border:1px solid var(--border);
      border-radius: 22px;
      padding:16px;
      background: rgba(255,255,255,.50);
      backdrop-filter: blur(14px) saturate(140%);
      box-shadow: 0 12px 30px rgba(16,48,96,.08);
    }
    :root[data-theme="dark"] .who-card{ background: rgba(255,255,255,.04); }

    .who-hero{
      display:flex;
      gap:14px;
      align-items:center;
      flex-wrap:wrap;
    }
    .who-avatar{
      width:72px;
      height:72px;
      border-radius: 22px;
      border:1px solid var(--border);
      background:
        radial-gradient(60px 60px at 30% 20%, rgba(36,107,255,.35), transparent 60%),
        radial-gradient(60px 60px at 90% 30%, rgba(24,198,255,.28), transparent 55%),
        radial-gradient(60px 60px at 40% 95%, rgba(124,58,237,.22), transparent 60%),
        rgba(255,255,255,.45);
      display:grid;
      place-items:center;
      font-weight:1000;
      letter-spacing:.6px;
      box-shadow: 0 18px 50px rgba(16,48,96,.12);
    }
    :root[data-theme="dark"] .who-avatar{ background: rgba(255,255,255,.04); }

    .who-name{ font-size:1.25rem; margin:0; font-weight:1000; }
    .who-role{ margin:2px 0 0; color:var(--muted); font-weight:800; }

    .who-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }

    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      border:0;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:24px;
      transform:translateX(-50%) translateY(16px);
      opacity:0;
      pointer-events:none;
      background: rgba(255,255,255,.65);
      color:var(--ink);
      padding:10px 14px;
      border-radius: 14px;
      border:1px solid rgba(24,198,255,.55);
      box-shadow: var(--shadow);
      transition: .18s ease;
      z-index: 999;
      max-width:min(92vw, 560px);
      text-align:center;
      font-weight: 900;
      backdrop-filter: blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .toast{ background: rgba(255,255,255,.06); }
    .toast.show{
      transform:translateX(-50%) translateY(0);
      opacity:1;
    }
  </style>
</head>

<body>
  <!-- Splash -->
  <div class="splash" id="splash" aria-label="Cargando Airconekta">
    <div class="splash-card" role="status" aria-live="polite">
      <div class="splash-logo" aria-hidden="true">
        <img
          class="logo-img"
          alt=""
          src="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png"
        />
      </div>
      <div class="splash-title">AIRCONEKTA</div>
      <p class="splash-sub">Herramienta ¬∑ Aguinaldo</p>
      <div class="splash-bar" aria-hidden="true"><i></i></div>
      <p class="sr-only">Cargando‚Ä¶</p>
    </div>
  </div>

  <div class="page">
    <div class="shell">
      <nav class="nav" aria-label="Barra superior">
        <div class="brand">
          <div class="logo" aria-hidden="true">
            <img
              class="logo-img"
              alt=""
              src="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png"
            />
          </div>
          <div>
            Airconekta
            <small>Calculadora de Aguinaldo</small>
          </div>
        </div>

        <div class="inline">
          <button class="btn btn-ghost" id="menuBtn" type="button">‚ò∞ Inicio</button>
          <button class="btn btn-icon" id="themeBtn" type="button" title="Cambiar tema" aria-label="Cambiar tema">üåì</button>
          <a class="btn" href="#" id="shareBtn" title="Compartir">‚á™ Compartir</a>
        </div>
      </nav>

      <!-- ===== HOME (aguinaldo) ===== -->
      <section class="card active" data-view="home" id="viewHome">
        <h1>Aguinaldo M√©xico</h1>
        <p class="lead">
          Basado en la <strong>Ley Federal del Trabajo</strong> ‚Äî m√≠nimo <strong>15 d√≠as de salario</strong>.
        </p>

        <form id="form" class="grid" novalidate>
          <div class="col-6">
            <label for="dias">D√≠as trabajados en el a√±o</label>
            <input type="number" id="dias" placeholder="Ej. 365" min="1" required>
          </div>

          <div class="col-6">
            <label for="salarioSem">Salario semanal (MXN)</label>
            <input type="number" id="salarioSem" placeholder="Ej. 2800" min="1" required>
          </div>

          <div class="col-12">
            <button type="submit" class="btn btn-primary">Calcular Aguinaldo üéÑ</button>
          </div>
        </form>

        <div id="resultado" class="result-box" style="display:none;"></div>

        <div class="divider"></div>
        <div class="status">
          Tip debug: agrega <strong>#whoami</strong> al final de la URL.
        </div>
      </section>

      <!-- ===== WHOAMI (vista oculta por hash) ===== -->
      <section class="card" data-view="whoami" id="viewWhoami" aria-label="Whoami">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
          <div>
            <h1>Whoami</h1>
            <p class="lead" style="margin-bottom:0">Vista especial (solo con <strong>#whoami</strong>).</p>
          </div>
          <button class="btn btn-ghost" type="button" id="whoBackBtn">‚Üê Volver</button>
        </div>

        <div class="who-wrap">
          <div class="who-card">
            <div class="who-hero">
              <div class="who-avatar" aria-hidden="true">JE</div>
              <div>
                <p class="who-name" id="whoName">Jair Elizondo</p>
                <p class="who-role" id="whoRole">Soporte / Instalaciones ¬∑ Airconekta</p>
              </div>
              <span class="pill">üß© Debug route ¬∑ #whoami</span>
            </div>

            <div class="divider"></div>

            <div class="grid">
              <div class="col-6">
                <div class="who-card" style="padding:12px">
                  <strong>üìû Tel√©fono</strong><br>
                  <span class="status" id="whoPhonePretty">322 243 9782</span>
                </div>
              </div>
              <div class="col-6">
                <div class="who-card" style="padding:12px">
                  <strong>üü¢ WhatsApp</strong><br>
                  <span class="status">Toca ‚ÄúAbrir chat‚Äù para escribir directo</span>
                </div>
              </div>
              <div class="col-6">
                <div class="who-card" style="padding:12px">
                  <strong>üß† Tip</strong><br>
                  <span class="status">En consola tambi√©n aparece tu firma</span>
                </div>
              </div>
              <div class="col-6">
                <div class="who-card" style="padding:12px">
                  <strong>üîí Nota</strong><br>
                  <span class="status">No aparece en el dashboard normal, solo aqu√≠</span>
                </div>
              </div>
            </div>

            <div class="who-actions">
              <a class="btn btn-primary" id="whoWhatsBtn" href="#" rel="noopener noreferrer">üü¢ Abrir chat</a>
              <a class="btn" id="whoCallBtn" href="#">üìû Llamar</a>
              <button class="btn btn-ghost" type="button" id="whoCopyBtn">üìã Copiar datos</button>
            </div>

            <div class="divider"></div>

            <div class="status">
              Si llegaste aqu√≠ por accidente: vuelve al inicio o borra el hash (<strong>#whoami</strong>) de la barra.
            </div>
          </div>

          <div class="who-card">
            <h2 style="margin:0 0 8px">üîé ¬øC√≥mo s√© que s√≠ funciona?</h2>
            <div class="status">
              <strong>1)</strong> Abre DevTools ‚Üí Console y recarga: ver√°s tu firma.<br><br>
              <strong>2)</strong> Ctrl+U (Ver c√≥digo fuente): ver√°s el bloque de firma en comentarios.<br><br>
              <strong>3)</strong> Escribe <strong>#whoami</strong> al final de la URL: te trae a esta vista.
            </div>

            <div class="divider"></div>

            <div class="status">
              Pro tip: <strong>aguinaldo.html#whoami</strong> desde cualquier dispositivo üì±üíª
            </div>
          </div>
        </div>
      </section>

    </div>

    <div class="shell" style="padding-top:0">
      <div class="footer">
        <span>¬© <span id="year"></span> Bah√≠a de Banderas</span>
        <span style="opacity:.85">Hecho con ‚ù§Ô∏è para empleados</span>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
  // =====================
  // CONFIG / FIRMA
  // =====================
  const WHOAMI = {
    name: "Jair Elizondo",
    phonePretty: "322 243 9782",
    phoneDigits: "3222439782",
    role: "Soporte / Instalaciones ¬∑ Airconekta",
    hint: "#whoami",
    webHint: "Escribe #whoami al final de la URL"
  };

  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => Array.from(document.querySelectorAll(sel));

  const toast = (msg) => {
    const t = $("#toast");
    t.textContent = msg;
    t.classList.add("show");
    setTimeout(() => t.classList.remove("show"), 1800);
  };

  // =====================
  // Firma en consola (solo al depurar)
  // =====================
  (function consoleSignature(){
    try{
      const line = "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ";
      console.log("%c" + line, "color:#18c6ff;font-weight:900");
      console.log("%cAIRCONEKTA ¬∑ Firma de desarrollo", "color:#246bff;font-size:14px;font-weight:900");
      console.log(
        "%c" + WHOAMI.name + "  ¬∑  " + WHOAMI.phonePretty + "  ¬∑  " + WHOAMI.hint,
        "color:#7c3aed;font-size:12px;font-weight:900"
      );
      console.log("%c" + WHOAMI.webHint, "color:#5b6b86;font-size:12px;font-weight:800");
      console.log("%c" + line, "color:#18c6ff;font-weight:900");
    }catch{}
  })();

  // =====================
  // Splash (3s)
  // =====================
  const splash = document.getElementById("splash");
  const hideSplash = () => splash?.classList.add("hide");
  splash?.addEventListener("click", hideSplash, { passive: true });
  window.addEventListener("load", () => setTimeout(hideSplash, 3000));

  // =====================
  // A√±o
  // =====================
  $("#year").textContent = new Date().getFullYear();

  // =====================
  // Tema (Light/Dark)
  // =====================
  const THEME_KEY = "airconekta_theme";

  function applyTheme(theme) {
    document.documentElement.setAttribute("data-theme", theme);
    localStorage.setItem(THEME_KEY, theme);
    const icon = theme === "dark" ? "üåô" : "‚òÄÔ∏è";
    $("#themeBtn").textContent = icon;
    $("#themeBtn").setAttribute(
      "aria-label",
      theme === "dark" ? "Cambiar a tema claro" : "Cambiar a tema oscuro"
    );
  }

  const savedTheme = localStorage.getItem(THEME_KEY);
  if (savedTheme) {
    applyTheme(savedTheme);
  } else {
    const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
    applyTheme(prefersDark ? "dark" : "light");
  }

  $("#themeBtn").addEventListener("click", () => {
    const current = document.documentElement.getAttribute("data-theme") || "light";
    applyTheme(current === "dark" ? "light" : "dark");
    toast("Tema actualizado ‚úÖ");
  });

  // =====================
  // Navegaci√≥n de vistas
  // =====================
  function showView(name) {
    $$("[data-view]").forEach((v) => v.classList.remove("active"));
    const view = document.querySelector(`[data-view="${name}"]`);
    if (view) view.classList.add("active");
    try { window.scrollTo({ top: 0, behavior: "smooth" }); } catch { window.scrollTo(0,0); }
  }

  $("#menuBtn").addEventListener("click", () => {
    if (location.hash) history.replaceState(null, "", location.pathname + location.search);
    showView("home");
    toast("Listo ‚úÖ");
  });

  // =====================
  // WHOAMI (hash route)
  // =====================
  function renderWhoami(){
    $("#whoName").textContent = WHOAMI.name;
    $("#whoRole").textContent = WHOAMI.role;
    $("#whoPhonePretty").textContent = WHOAMI.phonePretty;

    const waLink =
      `https://api.whatsapp.com/send?phone=52${WHOAMI.phoneDigits}` +
      `&text=${encodeURIComponent("Hola üëã " + WHOAMI.name + ", necesito soporte / info de Airconekta.")}` +
      `&type=phone_number&app_absent=0`;

    $("#whoWhatsBtn").setAttribute("href", waLink);
    $("#whoCallBtn").setAttribute("href", `tel:+52${WHOAMI.phoneDigits}`);

    $("#whoCopyBtn").onclick = async () => {
      const text =
        `${WHOAMI.name}\n` +
        `${WHOAMI.phonePretty}\n` +
        `Airconekta\n` +
        `Tip: ${location.origin + location.pathname}#whoami`;
      try{
        await navigator.clipboard.writeText(text);
        toast("Datos copiados ‚úÖ");
      }catch{
        toast("No se pudo copiar (permiso del navegador)");
      }
    };

    $("#whoBackBtn").onclick = () => {
      history.replaceState(null, "", location.pathname + location.search);
      showView("home");
      toast("Regresando ‚úÖ");
    };
  }

  function handleHashRoute(){
    const h = (location.hash || "").toLowerCase().trim();
    if (h === "#whoami"){
      renderWhoami();
      showView("whoami");
      return;
    }
    showView("home");
  }

  window.addEventListener("hashchange", handleHashRoute, { passive:true });

  // =====================
  // Compartir
  // =====================
  $("#shareBtn").addEventListener("click", async (e) => {
    e.preventDefault();
    if (navigator.share) {
      try {
        await navigator.share({
          title: "Calculadora de Aguinaldo",
          text: "Calcula tu aguinaldo en M√©xico (LFT 15 d√≠as m√≠nimo).",
          url: location.href,
        });
      } catch {}
    } else {
      try {
        await navigator.clipboard?.writeText(location.href);
        toast("Enlace copiado ‚úÖ");
      } catch {
        toast("Copia el enlace desde la barra del navegador");
      }
    }
  });

  // =====================
  // Aguinaldo: c√°lculo
  // =====================
  const form = document.getElementById("form");
  const resultado = document.getElementById("resultado");

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    if (!form.checkValidity()){
      form.reportValidity();
      return;
    }

    const dias = parseInt(document.getElementById("dias").value, 10);
    const salarioSem = parseFloat(document.getElementById("salarioSem").value);

    const salarioDia = salarioSem / 7;
    const aguinaldo = (dias / 365) * 15 * salarioDia;

    resultado.innerHTML = `
      <strong>Resultado:</strong><br><br>
      Salario diario: <strong>$${salarioDia.toFixed(2)} MXN</strong><br>
      Aguinaldo correspondiente: <strong>$${aguinaldo.toFixed(2)} MXN</strong><br><br>
      <span class="status">
        * C√°lculo basado en 15 d√≠as de salario seg√∫n la Ley Federal del Trabajo.
      </span>
    `;
    resultado.style.display = "block";
    toast("C√°lculo listo ‚úÖ");
  });

  // Init
  handleHashRoute();
</script>

</body>
</html>
