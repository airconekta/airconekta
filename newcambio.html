<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Airconekta ¬∑ Solicitar Cambio</title>
  <meta name="theme-color" content="#ffffff" />
  <meta name="color-scheme" content="light">
  <meta name="description" content="Formulario para solicitar cambio de domicilio de servicio y enviar datos v√≠a WhatsApp.">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256'%3E%3Crect width='256' height='256' rx='56' fill='%23ffffff'/%3E%3Cpath fill='%23246bff' d='M192 76a8 8 0 0 1 8 8v88a8 8 0 0 1-8 8H64a8 8 0 0 1-8-8V84a8 8 0 0 1 8-8h128zm-16 24H80v72h96V100zM92 72h72a4 4 0 0 1 0 8H92a4 4 0 1 1 0-8z'/%3E%3C/svg%3E" />

  <style>
    :root{
      --bg: #ffffff;
      --bg-2: #ffffff;
      --ink: #0f1a2e;
      --muted: #5b6b86;
      --accent: #246bff;
      --border: #cfe0ff;
      --radius: 18px;
      --shadow: 0 10px 26px rgba(16,48,96,.10);
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; margin:0; background:#fff; color:var(--ink); font:16px/1.4 system-ui; }
    .shell{ max-width:920px; margin:0 auto; padding:24px; }

    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 18px; border-radius:var(--radius);
      background:var(--bg-2); border:1px solid var(--border); box-shadow:var(--shadow);
      position:sticky; top:12px;
    }

    .brand{ display:flex; gap:12px; align-items:center; font-weight:800; }
    .brand .logo{ width:36px; height:36px; border-radius:12px; display:grid; place-items:center; background:#fff; border:1px solid var(--border); color:var(--accent); }
    .brand .logo span{ font-size:18px; }

    .card{
      margin-top:24px; padding:22px; border-radius:22px;
      background:var(--bg-2); border:1px solid var(--border); box-shadow:var(--shadow);
    }

    form{ display:grid; grid-template-columns:repeat(12,1fr); gap:14px; }
    .col-12{ grid-column:span 12; }
    .col-6{ grid-column:span 6; }

    @media (max-width:860px){ .col-6{ grid-column:span 12; } }

    input,textarea,select{
      width:100%; padding:12px 14px; border-radius:14px;
      border:1px solid var(--border); background:#fff;
      font-size:1rem; outline:none;
    }
    input:focus,textarea:focus,select:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(36,107,255,.12);
    }

    label{ font-size:.92rem; margin-bottom:6px; color:var(--muted); }

    .btn{
      border:1px solid var(--accent); color:var(--accent);
      padding:12px 16px; border-radius:14px; font-weight:700;
      background:#fff; cursor:pointer;
    }
    .btn-primary{
      background:var(--accent); color:#fff; border-color:var(--accent);
    }

    .toast{
      position:fixed; bottom:24px; left:50%; transform:translateX(-50%) translateY(20px);
      background:#fff; border:1px solid var(--accent); padding:10px 14px;
      border-radius:12px; opacity:0; pointer-events:none; transition:.2s ease;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

    .footer{ margin-top:20px; color:var(--muted); display:flex; justify-content:space-between; }
  </style>
</head>

<body>
  <div class="shell">

    <nav class="nav">
      <div class="brand">
        <div class="logo"><span>‚ö°</span></div>
        <div>Airconekta <span style="opacity:.65;font-weight:600">Cambio</span></div>
      </div>
      <button id="installBtn" class="btn" style="display:none">‚ûï Instalar</button>
    </nav>

    <section class="card">
      <h1>Solicitar cambio de domicilio</h1>
      <p class="lead">Llena los datos y al finalizar se abrir√° WhatsApp.</p>

      <form id="form" novalidate>

        <div class="col-12">
          <label>Nombre completo</label>
          <input id="nombre" required />
        </div>

        <div class="col-6">
          <label>Tel√©fono</label>
          <input id="telefono" required pattern="[0-9]{10}" placeholder="10 d√≠gitos" />
        </div>

        <div class="col-6">
          <label>Fecha disponible</label>
          <input id="fecha" type="date" required />
        </div>

        <div class="col-6">
          <label>Hora disponible</label>
          <select id="hora" required>
            <option value="">Selecciona una fecha primero</option>
          </select>
          <small id="horaHelp" style="color:#5b6b86"></small>
        </div>

        <div class="col-12">
          <label>Domicilio actual</label>
          <textarea id="domicilioActual" rows="3" required></textarea>
        </div>

        <div class="col-12">
          <label>Nuevo domicilio</label>
          <textarea id="domicilioNuevo" rows="3" required></textarea>
        </div>

        <div class="col-12">
          <label>Comentarios</label>
          <textarea id="comentarios" rows="3"></textarea>
        </div>

        <div class="col-12">
          <button class="btn btn-primary" type="submit">üì® Enviar solicitud</button>
        </div>

      </form>

      <div id="toast" class="toast"></div>
    </section>

    <div class="footer">
      <span>¬© <span id="year"></span> Airconekta</span>
      <span>Hecho con ‚ù§Ô∏è</span>
    </div>
  </div>

<script>
const $ = s => document.querySelector(s);
const toast = m => {
  const t = $('#toast');
  t.textContent = m;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),1500);
};

window.addEventListener('DOMContentLoaded', () => {

  $('#year').textContent = new Date().getFullYear();
  const NUM = "5213222108817";

  const API = "https://script.google.com/macros/s/AKfycbzy0kbhZmaqwwgOIWYFeRhJkgAZukeq23SNKqhcPnPoB1DiwXmQ9NypiRbEXtpr-45l/exec";

  async function cargarHoras() {
    const f = $('#fecha').value;
    const hora = $('#hora');
    const help = $('#horaHelp');

    if (!f) {
      hora.innerHTML = '<option>Selecciona una fecha primero</option>';
      help.textContent = '';
      return;
    }

    hora.innerHTML = '<option>Cargando‚Ä¶</option>';
    help.textContent = '';

    try {
      const res = await fetch(`${API}?date=${encodeURIComponent(f)}`);
      const data = await res.json();

      const slots = data.slots || [];
      if (!slots.length) {
        hora.innerHTML = '<option>Sin horarios disponibles</option>';
        help.textContent = 'No hay horarios disponibles.';
        return;
      }

      hora.innerHTML = '<option value="">Selecciona una hora</option>';
      slots.forEach(h => {
        const opt = document.createElement('option');
        opt.value = h;
        opt.textContent = h;
        hora.appendChild(opt);
      });

      help.textContent = "Horarios entre 10:00 y 17:00 (sin 14:00).";

    } catch (e) {
      hora.innerHTML = '<option>Error al cargar</option>';
      help.textContent = "No se pudo consultar.";
    }
  }

  $('#fecha').addEventListener('change', cargarHoras);

  $('#form').addEventListener('submit', e => {
    e.preventDefault();

    const tel = $('#telefono').value.replace(/\D/g,'');
    if (tel.length !== 10) {
      toast("El tel√©fono debe tener 10 d√≠gitos");
      return;
    }

    const msg =
`Hola üëã
Quiero solicitar un *cambio de domicilio*.

*Nombre:* ${$('#nombre').value}
*Tel√©fono:* ${$('#telefono').value}
*Fecha:* ${$('#fecha').value}
*Hora:* ${$('#hora').value}
*Domicilio actual:*
${$('#domicilioActual').value}

*Nuevo domicilio:*
${$('#domicilioNuevo').value}

*Comentarios:*
${$('#comentarios').value}`;

    window.open(`https://api.whatsapp.com/send?phone=${NUM}&text=${encodeURIComponent(msg)}`);
    toast("Abriendo WhatsApp‚Ä¶");
  });
});
</script>

</body>
</html>
